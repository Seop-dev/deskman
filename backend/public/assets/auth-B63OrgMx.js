import{g as o,a9 as a}from"./index-CGGVM91c.js";const n=o({id:"auth",state:()=>({user:JSON.parse(localStorage.getItem("user")||"null"),returnUrl:null}),actions:{async login(t,s){try{const e=await(await fetch("http://localhost:3000/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:t,pwd:s})})).json();e.result?(this.user={email:e.email,name:e.name,auth:e.auth},localStorage.setItem("user",JSON.stringify(this.user)),a.push(this.returnUrl||"/dashboard/default")):alert(e.message||"로그인 실패")}catch(r){console.error("로그인 에러:",r)}},async logout(){try{await fetch("http://localhost:3000/logout",{method:"GET",credentials:"include"})}catch(t){console.error("로그아웃 에러:",t)}finally{this.user=null,localStorage.removeItem("user"),a.push("/login")}}}});export{n as u};
