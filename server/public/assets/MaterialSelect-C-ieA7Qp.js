import{_ as O,a as D}from"./UiParentCard.vue_vue_type_script_setup_true_lang-DnD-5gIF.js";import{B as k}from"./main-Dfa23GB-.js";import{O as s,_ as B,$ as _,P as $,q as z,o as F,a,d as n,w as t,V as E,b as u,a0 as p,a3 as x,a4 as f,f as b,e as g,A as N,a1 as G,F as Q}from"./index-CGGVM91c.js";import{_ as Z}from"./NewModal-RG6-e5WE.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const L={class:"radioDiv"},W={class:"radioDiv"},j={__name:"MaterialSelect",setup(H){const P=G,T=s(null),A=s(""),M=s([]),V=s([]),C=[{field:"자재코드",headerName:"자재코드",flex:1},{field:"자재명",headerName:"자재명",flex:1},{field:"자재유형",headerName:"자재유형",flex:1},{field:"규격",headerName:"규격",flex:1},{field:"단위",headerName:"단위",flex:1}],R=s([]),y=async o=>{A.value=o,V.value=C;try{const e=await _.get("http://localhost:3000/materials");M.value=e.data.map(l=>({자재코드:l.MAT_CODE,자재명:l.MAT_NAME,자재유형:l.MAT_TYPE,규격:l.MAT_SIZE,단위:l.MAT_UNIT})),T.value&&T.value.open()}catch(e){console.error("자재 목록을 가져오는 중 오류가 발생했습니다:"+e),alert("자재 목록을 불러오는 데 실패했습니다.")}};function h(o){o&&(r.value=o.자재명,d.value=o.자재코드)}const S=s([{field:"입고번호",flex:1.5},{field:"공급업체",flex:1},{field:"자재명",flex:1},{field:"자재코드",flex:1},{field:"자재유형",flex:1},{field:"규격",flex:1},{field:"단위",flex:1},{field:"입고일자",flex:1.5},{field:"담당자",flex:1},{field:"입고수량",flex:1},{field:"상태",flex:1,cellStyle:o=>o.value=="검수 대기"?{color:"blue",fontWeight:"bold"}:o.value=="완료"?{color:"red",fontWeight:"bold"}:null}]),m=s([]);B(async()=>{try{const o=await _.get("http://localhost:3000/materialSelect");m.value=o.data.map(e=>({입고번호:e.RECEIPT_NO,공급업체:e.SUPPLYER,자재코드:e.MAT_CODE,자재명:e.MAT_NAME,자재유형:e.MAT_TYPE,규격:e.MAT_SIZE,단위:e.MAT_UNIT,입고일자:e.RECEIPT_DATE.slice(0,10),담당자:e.MANAGER,입고수량:e.RECEIVED_QTY,상태:e.TMP_STATUS}))}catch(o){console.error("발주 조회 실패:",o)}});const I=s({title:"입고"}),w=$([{title:"자재",disabled:!0,href:"#"},{title:"입고 조회",disabled:!1,href:"#"}]),r=s(""),d=s(""),i=s(""),c=s(""),v=s("");function U(){r.value="",d.value="",i.value="",c.value="",v.value=""}async function Y(){try{const o={MAT_NAME:r.value||null,MAT_CODE:d.value||null,MAT_TYPE:c.value||null,RECEIPT_DATE:i.value||null,PO_STATUS:v.value||null},e=await _.post("http://localhost:3000/tmpSearch",o);console.log(e.data),m.value=e.data.map(l=>({입고번호:l.RECEIPT_NO,공급업체:l.SUPPLYER,자재코드:l.MAT_CODE,자재명:l.MAT_NAME,자재유형:l.MAT_TYPE,규격:l.MAT_SIZE,단위:l.MAT_UNIT,입고일자:l.RECEIPT_DATE.slice(0,10),담당자:l.MANAGER,입고수량:l.RECEIVED_QTY,상태:l.MAT_TYPE=="원자재"?"검수 대기":l.MAT_TYPE=="부자재"?"완료":"실패"}))}catch(o){console.error("입고 검색 실패:",o)}}return(o,e)=>(F(),z(Q,null,[a(O,{title:I.value.title,breadcrumbs:w.value},null,8,["title","breadcrumbs"]),a(D,{title:"입고 검색조건"},{default:t(()=>[a(E,{class:"mb-4"},{default:t(()=>[a(u,{cols:"4"},{default:t(()=>[a(p,{label:"자재명",modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=l=>r.value=l),dense:"",outlined:"",readonly:""},{"append-inner":t(()=>[n("i",{class:"fa-solid fa-magnifying-glass",style:{cursor:"pointer","font-size":"large","margin-right":"0.5rem"},onClick:e[0]||(e[0]=l=>y("자재 조회",R.value,C))})]),_:1},8,["modelValue"])]),_:1}),a(u,{cols:"4"},{default:t(()=>[a(p,{label:"자재코드",modelValue:d.value,"onUpdate:modelValue":e[2]||(e[2]=l=>d.value=l),dense:"",outlined:"",readonly:""},null,8,["modelValue"])]),_:1}),a(u,{cols:"4"},{default:t(()=>[n("div",L,[e[6]||(e[6]=n("span",{class:"mr-2"},"자재유형:",-1)),a(x,{modelValue:c.value,"onUpdate:modelValue":e[3]||(e[3]=l=>c.value=l),inline:"","hide-details":""},{default:t(()=>[a(f,{label:"원자재",value:"원자재"}),a(f,{label:"부자재",value:"부자재"}),a(f,{label:"소모품",value:"소모품"})]),_:1},8,["modelValue"])])]),_:1})]),_:1}),a(E,{class:"mb-4"},{default:t(()=>[a(u,{cols:"4"},{default:t(()=>[a(p,{label:"입고일자",modelValue:i.value,"onUpdate:modelValue":e[4]||(e[4]=l=>i.value=l),type:"date",dense:"",outlined:""},null,8,["modelValue"])]),_:1}),a(u,{cols:"4"}),a(u,{cols:"4"},{default:t(()=>[n("div",W,[e[7]||(e[7]=n("span",{class:"mr-2"},"상태:",-1)),a(x,{modelValue:v.value,"onUpdate:modelValue":e[5]||(e[5]=l=>v.value=l),inline:"","hide-details":""},{default:t(()=>[a(f,{label:"검수 대기",value:"검수 대기"}),a(f,{label:"완료",value:"완료"})]),_:1},8,["modelValue"])])]),_:1})]),_:1}),a(E,{justify:"center"},{default:t(()=>[a(b,{color:"error",class:"mr-2",onClick:U},{default:t(()=>e[8]||(e[8]=[g("초기화")])),_:1}),a(b,{color:"darkText",onClick:Y},{default:t(()=>e[9]||(e[9]=[g("검색")])),_:1})]),_:1})]),_:1}),e[10]||(e[10]=n("div",{class:"div"},null,-1)),a(D,{title:"입고 목록"},{default:t(()=>[a(N(k),{rowData:m.value,columnDefs:S.value,theme:N(P),style:{height:"19rem",width:"100%"},pagination:!0,"pagination-page-size":5,onCellValueChanged:o.onCellValueChanged},null,8,["rowData","columnDefs","theme","onCellValueChanged"]),a(Z,{ref_key:"modalRef",ref:T,title:A.value,rowData:M.value,colDefs:V.value,onConfirm:h},null,8,["title","rowData","colDefs"])]),_:1})],64))}},ae=q(j,[["__scopeId","data-v-325656c2"]]);export{ae as default};
