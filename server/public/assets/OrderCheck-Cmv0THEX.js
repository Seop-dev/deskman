import{O as c,P as R,_ as W,y as p,q as F,o as P,a as o,w as d,V as N,b as u,a0 as n,f as h,e as b,A as S,F as z,$ as M,H as B}from"./index-CGGVM91c.js";import{_ as G,a as E}from"./UiParentCard.vue_vue_type_script_setup_true_lang-DnD-5gIF.js";import{B as T}from"./main-Dfa23GB-.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";const $="http://localhost:3000",q=10,I={__name:"OrderCheck",setup(Q){const v=B(),C=c({title:"작업지시 조회"}),g=R([{title:"생산",disabled:!0,href:"#"},{title:"작업지시 조회",disabled:!1,href:"#"}]),l=c({issueNumber:"",orderName:"",productCode:"",contact:""}),f=c([]);async function m(){const t=(l.value.issueNumber||l.value.orderName||l.value.productCode||l.value.contact||"").trim();try{const{data:e}=await M.get(`${$}/workorders`,{params:{kw:t,page:1,size:300}});e!=null&&e.ok&&(f.value=(e.rows||[]).map(a=>({id:a.id,issueNumber:a.issueNumber,orderName:a.orderName||"",orderDate:a.orderDate,contact:a.contact,productCode:a.productCode,productName:a.productName,dueDate:a.dueDate,targetQty:a.targetQty,status:a.status||"OPEN",memo:a.memo||""})))}catch(e){console.error(e)}}W(m);const x=p(()=>{const t=l.value;return f.value.filter(e=>(!t.issueNumber||e.issueNumber.includes(t.issueNumber))&&(!t.orderName||e.orderName.includes(t.orderName))&&(!t.productCode||e.productCode.includes(t.productCode))&&(!t.contact||e.contact.includes(t.contact)))}),V=p(()=>x.value),r={cellStyle:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},tooltipValueGetter:t=>t.value},w={...r,cellClass:"ag-right-aligned-cell"},_=[{headerName:"지시번호",field:"issueNumber",flex:1.2,minWidth:150,...r},{headerName:"지시명",field:"orderName",flex:1.4,minWidth:160,...r},{headerName:"지시일자",field:"orderDate",flex:.9,minWidth:120,...r},{headerName:"작성자",field:"contact",flex:.8,minWidth:90,...r},{headerName:"제품코드",field:"productCode",flex:.9,minWidth:110,...r},{headerName:"제품명칭",field:"productName",flex:1.2,minWidth:150,...r},{headerName:"납기일자",field:"dueDate",flex:.9,minWidth:120,...r},{headerName:"목표수량",field:"targetQty",flex:.7,minWidth:90,...w}];let i;function y(t){i=t.api,s()}function s(){i==null||i.sizeColumnsToFit()}function D(){m().then(()=>s())}function k(){l.value={issueNumber:"",orderName:"",productCode:"",contact:""},m().then(s)}function O(t){const e=t==null?void 0:t.data;e&&v.push({name:"OrderModify",query:{issue:e.issueNumber,id:e.id}})}return(t,e)=>(P(),F(z,null,[o(G,{title:C.value.title,breadcrumbs:g.value},null,8,["title","breadcrumbs"]),o(E,null,{default:d(()=>[o(N,{class:"mb-4",dense:""},{default:d(()=>[o(u,{cols:"3"},{default:d(()=>[o(n,{label:"지시번호",modelValue:l.value.issueNumber,"onUpdate:modelValue":e[0]||(e[0]=a=>l.value.issueNumber=a),modelModifiers:{trim:!0},dense:"",outlined:"","hide-details":""},null,8,["modelValue"])]),_:1}),o(u,{cols:"3"},{default:d(()=>[o(n,{label:"지시명",modelValue:l.value.orderName,"onUpdate:modelValue":e[1]||(e[1]=a=>l.value.orderName=a),modelModifiers:{trim:!0},dense:"",outlined:"","hide-details":""},null,8,["modelValue"])]),_:1}),o(u,{cols:"3"},{default:d(()=>[o(n,{label:"제품코드",modelValue:l.value.productCode,"onUpdate:modelValue":e[2]||(e[2]=a=>l.value.productCode=a),modelModifiers:{trim:!0},dense:"",outlined:"","hide-details":""},null,8,["modelValue"])]),_:1}),o(u,{cols:"3"},{default:d(()=>[o(n,{label:"작성자",modelValue:l.value.contact,"onUpdate:modelValue":e[3]||(e[3]=a=>l.value.contact=a),modelModifiers:{trim:!0},dense:"",outlined:"","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),o(N,{justify:"center",class:"mt-2 mb-4"},{default:d(()=>[o(u,{cols:"auto"},{default:d(()=>[o(h,{variant:"flat",color:"error",class:"mx-2",onClick:k},{default:d(()=>e[4]||(e[4]=[b("초기화")])),_:1}),o(h,{variant:"flat",color:"darkText",class:"mx-2",onClick:D},{default:d(()=>e[5]||(e[5]=[b("검색")])),_:1})]),_:1})]),_:1}),o(S(T),{class:"ag-theme-quartz ag-no-wrap",rowData:V.value,columnDefs:_,pagination:!0,paginationPageSize:q,suppressPaginationPanel:!1,domLayout:"autoHeight",rowSelection:"single",onGridReady:y,onFirstDataRendered:s,onGridSizeChanged:s,onRowDoubleClicked:O},null,8,["rowData"])]),_:1})],64))}},Z=U(I,[["__scopeId","data-v-29fe8b0a"]]);export{Z as default};
