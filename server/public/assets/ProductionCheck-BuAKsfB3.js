import{O as u,P as U,_ as z,am as M,q as G,o as T,a as l,w as o,d as _,V as b,b as s,a0 as i,f as D,e as h,A as y,t as k,a8 as $,F as E,$ as I}from"./index-CGGVM91c.js";import{_ as q,a as A}from"./UiParentCard.vue_vue_type_script_setup_true_lang-DnD-5gIF.js";import{B as O}from"./main-Dfa23GB-.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"mt-4",style:{"text-align":"right"}},Q={class:"muted"},Z="http://localhost:3000",J=10,K={__name:"ProductionCheck",setup(X){const P=u({title:"생산계획 조회"}),S=U([{title:"생산",disabled:!0,href:"#"},{title:"생산계획 조회",disabled:!1,href:"#"}]),a=u({planNo:"",planName:"",writer:"",dueDate:"",productCode:"",productName:""}),f=u([]),N=u(0);async function v(){try{const d=(a.value.planNo||a.value.planName||"").trim(),{data:e}=await I.get(`${Z}/plans`,{params:{kw:d,page:1,size:200}});if(e!=null&&e.ok){const t=e.rows??[],w=(a.value.writer||"").trim(),g=(a.value.dueDate||"").trim(),x=(a.value.productCode||"").trim().toLowerCase(),C=(a.value.productName||"").trim().toLowerCase();f.value=t.filter(p=>(!w||(p.writer||"").includes(w))&&(!g||p.dueDate===g)&&(!x||(p.productCode||"").toLowerCase().includes(x))&&(!C||(p.productName||"").toLowerCase().includes(C))),N.value=e.total??f.value.length??0,c()}else V("조회 실패","error")}catch(d){console.error(d),V("조회 중 오류","error")}}function W(){v()}function R(){a.value={planNo:"",planName:"",writer:"",dueDate:"",productCode:"",productName:""},v()}z(()=>{v()});const r={cellStyle:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},tooltipValueGetter:d=>d.value},B={...r,cellClass:"ag-right-aligned-cell"},F=M([{headerName:"계획번호",field:"planNo",flex:1.2,minWidth:150,...r},{headerName:"계획명",field:"planName",flex:1.4,minWidth:160,...r},{headerName:"제품코드",field:"productCode",flex:1,minWidth:120,...r},{headerName:"제품명",field:"productName",flex:1.4,minWidth:160,...r},{headerName:"작성일자",field:"createdDate",flex:.9,minWidth:120,...r},{headerName:"작성자",field:"writer",flex:.8,minWidth:90,...r},{headerName:"총수량",field:"totalQty",flex:.7,minWidth:90,...B},{headerName:"납기일자",field:"dueDate",flex:.9,minWidth:120,...r},{headerName:"비고",field:"memo",flex:1.2,minWidth:140,...r}]);let m;function L(d){m=d.api,c()}function c(){m==null||m.sizeColumnsToFit()}const n=u({open:!1,msg:"",color:"primary"}),V=(d,e="primary")=>n.value={open:!0,msg:d,color:e};return(d,e)=>(T(),G(E,null,[l(q,{title:P.value.title,breadcrumbs:S.value},null,8,["title","breadcrumbs"]),l(A,null,{default:o(()=>[l(b,{class:"mb-4",dense:""},{default:o(()=>[l(s,{cols:"3"},{default:o(()=>[l(i,{label:"계획번호",modelValue:a.value.planNo,"onUpdate:modelValue":e[0]||(e[0]=t=>a.value.planNo=t),modelModifiers:{trim:!0},dense:"",outlined:"","hide-details":"",placeholder:"예) PL-20250811-1234"},null,8,["modelValue"])]),_:1}),l(s,{cols:"3"},{default:o(()=>[l(i,{label:"계획명",modelValue:a.value.planName,"onUpdate:modelValue":e[1]||(e[1]=t=>a.value.planName=t),modelModifiers:{trim:!0},dense:"",outlined:"","hide-details":"",placeholder:"예) 월간 생산 계획"},null,8,["modelValue"])]),_:1}),l(s,{cols:"3"},{default:o(()=>[l(i,{label:"작성자",modelValue:a.value.writer,"onUpdate:modelValue":e[2]||(e[2]=t=>a.value.writer=t),modelModifiers:{trim:!0},dense:"",outlined:"","hide-details":"",placeholder:"예) 홍길동"},null,8,["modelValue"])]),_:1}),l(s,{cols:"3"},{default:o(()=>[l(i,{label:"납기일자",modelValue:a.value.dueDate,"onUpdate:modelValue":e[3]||(e[3]=t=>a.value.dueDate=t),type:"date",dense:"",outlined:"","hide-details":""},null,8,["modelValue"])]),_:1}),l(s,{cols:"3"},{default:o(()=>[l(i,{label:"제품코드",modelValue:a.value.productCode,"onUpdate:modelValue":e[4]||(e[4]=t=>a.value.productCode=t),modelModifiers:{trim:!0},dense:"",outlined:"","hide-details":"",placeholder:"예) PRD-001"},null,8,["modelValue"])]),_:1}),l(s,{cols:"3"},{default:o(()=>[l(i,{label:"제품명",modelValue:a.value.productName,"onUpdate:modelValue":e[5]||(e[5]=t=>a.value.productName=t),modelModifiers:{trim:!0},dense:"",outlined:"","hide-details":"",placeholder:"예) 학생클래식 책상"},null,8,["modelValue"])]),_:1})]),_:1}),l(b,{justify:"center",class:"mt-2 mb-4"},{default:o(()=>[l(s,{cols:"auto"},{default:o(()=>[l(D,{variant:"flat",color:"error",class:"mx-2",onClick:R},{default:o(()=>e[7]||(e[7]=[h("초기화")])),_:1}),l(D,{variant:"flat",color:"darkText",class:"mx-2",onClick:W},{default:o(()=>e[8]||(e[8]=[h("검색")])),_:1})]),_:1})]),_:1}),l(y(O),{class:"ag-theme-quartz ag-no-wrap mt-4",rowData:f.value,columnDefs:y(F),pagination:!0,paginationPageSize:J,suppressPaginationPanel:!1,domLayout:"autoHeight",rowSelection:"single",onGridReady:L,onFirstDataRendered:c,onGridSizeChanged:c},null,8,["rowData","columnDefs"]),_("div",H,[_("small",Q,"총 "+k(N.value.toLocaleString())+"건",1)]),l($,{modelValue:n.value.open,"onUpdate:modelValue":e[6]||(e[6]=t=>n.value.open=t),color:n.value.color,timeout:2e3},{default:o(()=>[h(k(n.value.msg),1)]),_:1},8,["modelValue","color"])]),_:1})],64))}},te=j(K,[["__scopeId","data-v-80003a79"]]);export{te as default};
