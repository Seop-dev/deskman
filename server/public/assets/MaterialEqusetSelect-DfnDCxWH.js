import{_ as $,a as C}from"./UiParentCard.vue_vue_type_script_setup_true_lang-DnD-5gIF.js";import{B as q}from"./main-Dfa23GB-.js";import{O as s,_ as O,$ as p,P as z,q as F,o as G,a as l,d as i,w as o,V,b as d,a0 as n,a3 as P,a4 as M,f as g,e as A,A as E,a1 as Q,F as W}from"./index-CGGVM91c.js";import{_ as Y}from"./NewModal-RG6-e5WE.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const j={class:"radioDiv"},H={__name:"MaterialEqusetSelect",setup(J){const N=Q,f=s(null),_=s(""),T=s([]),D=s([]),b=[{field:"자재코드",headerName:"자재코드",flex:1},{field:"자재명",headerName:"자재명",flex:1},{field:"자재유형",headerName:"자재유형",flex:1},{field:"규격",headerName:"규격",flex:1},{field:"단위",headerName:"단위",flex:1}],y=s([]),R=async t=>{_.value=t,D.value=b;try{const e=await p.get("http://localhost:3000/materials");T.value=e.data.map(a=>({자재코드:a.MAT_CODE,자재명:a.MAT_NAME,자재유형:a.MAT_TYPE,규격:a.MAT_SIZE,단위:a.MAT_UNIT})),f.value&&f.value.open()}catch(e){console.error("자재 목록을 가져오는 중 오류가 발생했습니다:"+e),alert("자재 목록을 불러오는 데 실패했습니다.")}};function h(t){t&&(r.value=t.자재명,u.value=t.자재코드)}const x=s([]),w=s([{field:"요청서번호",flex:2},{field:"자재명",flex:1},{field:"자재코드",flex:1},{field:"규격",flex:1},{field:"단위",flex:1},{field:"작성일자",flex:1.5},{field:"회수요청일자",flex:1.5},{field:"담당자",flex:1},{field:"총수량",headerName:"총 수량",flex:1},{field:"상태",flex:1,cellStyle:t=>t.value==="등록"?{color:"black",fontWeight:"bold"}:t.value==="완료"?{color:"red",fontWeight:"bold"}:null}]);O(async()=>{try{await p.post("http://localhost:3000/reMaterialSelectUpdate");const t=await p.get("http://localhost:3000/reMaterialSelect");x.value=t.data.map(e=>({요청서번호:e.RR_NO,자재명:e.MAT_NAME,자재코드:e.MAT_CODE,규격:e.MAT_SIZE,단위:e.MAT_UNIT,작성일자:e.CREATED_DATE.slice(0,10),회수요청일자:e.RR_DATE.slice(0,10),담당자:e.MANAGER,총수량:e.RE_QTY,상태:e.RE_STATUS}))}catch(t){console.error("발주 조회 실패:",t)}});const S=s({title:"불량품"}),U=z([{title:"자재",disabled:!0,href:"#"},{title:"자재반품요청서 조회",disabled:!1,href:"#"}]),r=s(""),u=s(""),m=s(""),k=s(""),c=s(""),v=s("");function B(){r.value="",u.value="",m.value="",k.value="",c.value="",v.value=""}function I(){}return(t,e)=>(G(),F(W,null,[l($,{title:S.value.title,breadcrumbs:U.value},null,8,["title","breadcrumbs"]),l(C,{title:"자재반품요청서 검색조건"},{default:o(()=>[l(V,{class:"mb-4"},{default:o(()=>[l(d,{cols:"4"},{default:o(()=>[l(n,{label:"자재명",modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=a=>r.value=a),placeholder:"자재명",dense:"",outlined:"",readonly:""},{"append-inner":o(()=>[i("i",{class:"fa-solid fa-magnifying-glass",style:{cursor:"pointer","font-size":"large","margin-right":"0.5rem"},onClick:e[0]||(e[0]=a=>R("자재 조회",y.value,b))})]),_:1},8,["modelValue"])]),_:1}),l(d,{cols:"4"},{default:o(()=>[l(n,{label:"자재코드",modelValue:u.value,"onUpdate:modelValue":e[2]||(e[2]=a=>u.value=a),placeholder:"자재코드",dense:"",outlined:"",readonly:""},null,8,["modelValue"])]),_:1}),l(d,{cols:"4"},{default:o(()=>[l(n,{label:"담당자",modelValue:t.manager,"onUpdate:modelValue":e[3]||(e[3]=a=>t.manager=a),placeholder:"담당자",dense:"",outlined:""},null,8,["modelValue"])]),_:1})]),_:1}),l(V,{class:"mb-4"},{default:o(()=>[l(d,{cols:"4"},{default:o(()=>[l(n,{label:"입고일자",modelValue:m.value,"onUpdate:modelValue":e[4]||(e[4]=a=>m.value=a),type:"date",dense:"",outlined:""},null,8,["modelValue"])]),_:1}),l(d,{cols:"4"},{default:o(()=>[l(n,{label:"회수요청일자",modelValue:v.value,"onUpdate:modelValue":e[5]||(e[5]=a=>v.value=a),type:"date",dense:"",outlined:""},null,8,["modelValue"])]),_:1}),l(d,{cols:"4"},{default:o(()=>[i("div",j,[e[7]||(e[7]=i("span",{class:"mr-2"},"상태:",-1)),l(P,{modelValue:c.value,"onUpdate:modelValue":e[6]||(e[6]=a=>c.value=a),inline:"","hide-details":""},{default:o(()=>[l(M,{label:"등록",value:"등록"}),l(M,{label:"완료",value:"완료"})]),_:1},8,["modelValue"])])]),_:1})]),_:1}),l(V,{justify:"center"},{default:o(()=>[l(g,{color:"error",class:"mr-2",onClick:B},{default:o(()=>e[8]||(e[8]=[A("초기화")])),_:1}),l(g,{color:"darkText",onClick:I},{default:o(()=>e[9]||(e[9]=[A("검색")])),_:1})]),_:1})]),_:1}),e[10]||(e[10]=i("div",{class:"div"},null,-1)),l(C,{title:"자재반품요청서 목록"},{default:o(()=>[l(E(q),{rowData:x.value,columnDefs:w.value,theme:E(N),style:{height:"200px",width:"100%"},onCellValueChanged:t.onCellValueChanged},null,8,["rowData","columnDefs","theme","onCellValueChanged"]),l(Y,{ref_key:"modalRef",ref:f,title:_.value,rowData:T.value,colDefs:D.value,onConfirm:h},null,8,["title","rowData","colDefs"])]),_:1})],64))}},ae=Z(H,[["__scopeId","data-v-ec87c051"]]);export{ae as default};
