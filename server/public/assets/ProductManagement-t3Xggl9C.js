import{aU as v,aV as V,O as s,P as N,y as S,_ as D,q as x,o as k,a,w as o,d as q,V as C,b as l,a0 as A,f as B,e as R,A as d,a1 as M,F as z,$ as F,H as O}from"./index-CGGVM91c.js";import{_ as P,a as T}from"./UiParentCard.vue_vue_type_script_setup_true_lang-DnD-5gIF.js";import{B as $}from"./main-Dfa23GB-.js";import{u as U}from"./auth-B63OrgMx.js";const Q={__name:"ProductManagement",setup(W){const u=U();v.registerModules([V]);const c=M,m=O(),f=s({title:"제품검사성적서 관리"}),p=N([{title:"품질",disabled:!0,href:"#"},{title:"제품성적서관리",disabled:!1,href:"#"}]),n=s({finished_at:""}),_=s([{headerName:"지시번호",field:"wo_no"},{headerName:"제품코드",field:"product_code"},{headerName:"제품명",field:"product_name"},{headerName:"제품유형",field:"product_type"},{headerName:"총생산량",field:"qty"},{headerName:"지시상태",field:"status"},{headerName:"작업자",field:"writer"},{headerName:"생산완료일자",field:"finished_at"}]),i=s([]),h=async()=>{try{const{data:t}=await F.get("http://localhost:3000/taskprd");i.value=Array.isArray(t)?t:[]}catch(t){console.error("데이터 로드 실패:",t),i.value=[]}},g=S(()=>{const t=(n.value.finished_at||"").trim();return i.value.map(e=>({...e,finished_at:e.finished_at?String(e.finished_at).substring(0,10):""})).filter(e=>!t||e.finished_at.startsWith(t))}),y=s({defaultColDef:{flex:1,minWidth:100,resizable:!0},pagination:!0,paginationAutoPageSize:!0}),b=t=>{var r;const e=t.data;m.push({path:"/qm/prdmngcert",query:{wo_no:String(e.wo_no),product_code:String(e.product_code||""),product_name:String(e.product_name||""),product_type:String(e.product_type||""),qty:String(e.qty||0),writer:String(((r=u.user)==null?void 0:r.name)||""),finished_at:String(e.finished_at||"")}})},w=()=>{n.value.finished_at=""};return D(()=>{h()}),(t,e)=>(k(),x(z,null,[a(P,{title:f.value.title,breadcrumbs:p.value},null,8,["title","breadcrumbs"]),a(T,null,{default:o(()=>[a(C,{class:"mb-4"},{default:o(()=>[a(l,{cols:"3"},{default:o(()=>[a(A,{label:"생산완료일자",modelValue:n.value.finished_at,"onUpdate:modelValue":e[0]||(e[0]=r=>n.value.finished_at=r),type:"date",dense:"",outlined:""},null,8,["modelValue"])]),_:1}),a(l,{justify:"end",class:"mb-4"},{default:o(()=>[a(B,{color:"error",variant:"elevated",onClick:w},{default:o(()=>e[1]||(e[1]=[R("초기화")])),_:1})]),_:1})]),_:1}),e[2]||(e[2]=q("br",null,null,-1)),a(d($),{rowData:g.value,columnDefs:_.value,theme:d(c),gridOptions:y.value,onRowClicked:b,style:{height:"400px"}},null,8,["rowData","columnDefs","theme","gridOptions"])]),_:1})],64))}};export{Q as default};
