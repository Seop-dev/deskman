import{_ as V,a as y}from"./UiParentCard.vue_vue_type_script_setup_true_lang-DnD-5gIF.js";import{O as i,P as O,_ as A,$ as c,q as k,o as I,a as l,w as r,d as s,a0 as p,f as D,e as m,A as E,a1 as S,V as L,F as M}from"./index-CGGVM91c.js";import{B as Q}from"./main-Dfa23GB-.js";import{d as B}from"./theme-bootstrap-maRaUoWN.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Y={class:"d-flex align-center mb-4"},F={class:"main-container"},H={class:"list-container"},K={__name:"MkInbound",setup($){const d=B.useToast(),f=i(null),g=a=>{f.value=a.api},T=S,b=new Date().toISOString().split("T")[0],o=i({startDate:b,endDate:""}),u=i([]),C=i([{headerCheckboxSelection:!0,checkboxSelection:!0,width:50},{field:"검사번호",flex:1},{field:"검사일자",flex:1},{field:"제품코드",flex:1},{field:"제품명",flex:1},{field:"제품유형",flex:1},{field:"수량",flex:.7}]),x=i({title:"입고 및 LOT번호등록"}),v=O([{title:"영업",disabled:!0,href:"#"},{title:"제품 입출고",disabled:!0,href:"#"},{title:"입고 및 LOT번호등록",disabled:!1,href:"#"}]);A(()=>{_()});const _=async()=>{const a=await c.get("http://localhost:3000/inboundList");console.log(a),u.value=a.data.map(t=>{var e;return{검사번호:t.PRD_CERT_ID,제품코드:t.PRD_CODE,제품명:t.PRD_NAME,제품유형:t.PRD_TYPE,검사일자:t.Q_CHECKED_DATE instanceof Date?t.Q_CHECKED_DATE.toISOString().substring(0,10):((e=t.Q_CHECKED_DATE)==null?void 0:e.substring(0,10))||"",수량:t.TOTAL_QTY}})},R=async()=>{const a=f.value.getSelectedRows();if(a.length===0){d.warning("입고할 제품을 선택하세요");return}console.log(a);const t=a.map(n=>({RECEIVED_QTY:n.수량,PRD_CERT_ID:n.검사번호,PRD_CODE:n.제품코드,PRD_NAME:n.제품명,PRD_TYPE:n.제품유형})),e=await c.post("http://localhost:3000/inboundInsert",t);console.log(e),d.success("등록완료",{position:"top-right",duration:1e3})},h=async()=>{const a={startDate:o.value.startDate,endDate:o.value.endDate};if(!o.value.startDate){d.warning("날짜를 올바르게 선택하세요.",{position:"top-right",duration:1e3});return}const t=await c.post("http://localhost:3000/inboundSearch",a);u.value=t.data.map(e=>({검사번호:e.PRD_CERT_ID,제품코드:e.PRD_CODE,제품유형:e.PRD_TYPE,제품명:e.PRD_NAME,검사일자:e.Q_CHECKED_DATE.substring(0,10),수량:e.TOTAL_QTY}))},w=a=>{console.log(a.value),console.log(u.value)},P=()=>{o.value={startDate:"",endDate:""},_()};return(a,t)=>(I(),k(M,null,[l(V,{title:x.value.title,breadcrumbs:v.value},null,8,["title","breadcrumbs"]),l(y,null,{default:r(()=>[t[7]||(t[7]=s("h5",null,"입고 및 LOT생성",-1)),s("div",Y,[l(p,{label:"검사 일자",type:"date",modelValue:o.value.startDate,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value.startDate=e),"hide-details":"",class:"mr-2",style:{"max-width":"180px"}},null,8,["modelValue"]),l(p,{label:"검사 일자",type:"date",modelValue:o.value.endDate,"onUpdate:modelValue":t[1]||(t[1]=e=>o.value.endDate=e),"hide-details":"",class:"mr-2",style:{"max-width":"180px"}},null,8,["modelValue"]),l(D,{color:"darkText",onClick:h},{default:r(()=>t[2]||(t[2]=[m("검색")])),_:1}),l(D,{color:"error",class:"ml-3",onClick:P},{default:r(()=>t[3]||(t[3]=[m("초기화")])),_:1})]),s("div",F,[s("div",H,[l(E(Q),{rowData:u.value,columnDefs:C.value,theme:E(T),style:{height:"550px",width:"100%"},onCellValueChanged:w,onGridReady:g,rowSelection:"single",pagination:!0,"pagination-page-size":20},null,8,["rowData","columnDefs","theme"]),t[5]||(t[5]=s("br",null,null,-1)),t[6]||(t[6]=s("br",null,null,-1)),l(L,{justify:"end"},{default:r(()=>[l(D,{color:"primary",class:"mr-6",onClick:R},{default:r(()=>t[4]||(t[4]=[m("LOT번호등록")])),_:1})]),_:1})])])]),_:1})],64))}},J=N(K,[["__scopeId","data-v-593c5d93"]]);export{J as default};
