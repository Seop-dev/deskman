import{aU as k,aV as I,O as s,P,b1 as E,y as x,q as B,o as L,a as t,w as r,d as O,V as p,b as n,a0 as u,f as Q,e as M,A as y,a1 as U,F as q,$ as z,H as F}from"./index-CGGVM91c.js";import{_ as Y,a as $}from"./UiParentCard.vue_vue_type_script_setup_true_lang-DnD-5gIF.js";import{B as j}from"./main-Dfa23GB-.js";const W={__name:"ProductList",setup(H){k.registerModules([I]);const b=U,D=F(),v=s({title:"제품검사성적서 조회"}),C=P([{title:"품질",disabled:!0,href:"#"},{title:"제품성적서조회",disabled:!1,href:"#"}]),l=s({prdType:"",chkedDate:"",certId:"",prdName:""}),c=s([{headerName:"검사번호",field:"certId"},{headerName:"제품명",field:"prdName"},{headerName:"제품유형",field:"prdType"},{headerName:"제품코드",field:"prdCode"},{headerName:"검사완료일자",field:"finishedAt"}]),m=s([]),h=async()=>{try{const a=await z.get("http://localhost:3000/prdcertlist");a.data.length>0&&(m.value=a.data.map(e=>({certId:e.PRD_CERT_ID,prdCode:e.PRD_CODE,prdName:e.PRD_NAME,finishedAt:(e.Q_CHECKED_DATE||"").substring(0,10),prdType:e.PRD_TYPE,totalQty:e.TOTAL_QTY,writer:e.CREATED_BY})))}catch(a){console.error("데이터 로딩 실패:",a.message)}};E(()=>{h()});const V=x(()=>{const a=(l.value.chkedDate||"").trim(),e=(l.value.certId||"").trim().toLowerCase(),d=(l.value.prdName||"").trim().toLowerCase(),f=(l.value.prdType||"").trim().toLowerCase(),i=o=>(o??"").toString().toLowerCase().trim();return m.value.filter(o=>{const N=!a||(o.finishedAt??"").includes(a),T=!e||i(o.certId).includes(e),A=!d||i(o.prdName).includes(d),R=!f||i(o.prdType).includes(f);return N&&T&&A&&R})}),_=s({defaultColDef:{flex:1,minWidth:100,resizable:!0},columnDefs:c,pagination:!0,paginationAutoPageSize:!0}),g=a=>{const e=a.data;console.log("클릭된 행:",e),D.push({path:"/qm/prdlstdtl",query:{certId:e.certId,prdCode:e.prdCode,prdName:e.prdName,finishedAt:e.finishedAt,prdType:e.prdType,totalQty:e.totalQty,writer:e.writer}})},w=()=>{const a=l.value;a.chkedDate="",a.certId="",a.prdName="",a.prdType=""};return(a,e)=>(L(),B(q,null,[t(Y,{title:v.value.title,breadcrumbs:C.value},null,8,["title","breadcrumbs"]),t($,null,{default:r(()=>[t(p,{class:"mb-4",justify:"space-between",align:"center"},{default:r(()=>[t(n,{cols:"auto"})]),_:1}),t(p,{class:"mb-4"},{default:r(()=>[t(n,{cols:"3"},{default:r(()=>[t(u,{label:"검사번호",modelValue:l.value.certId,"onUpdate:modelValue":e[0]||(e[0]=d=>l.value.certId=d),dense:"",outlined:""},null,8,["modelValue"])]),_:1}),t(n,{cols:"3"},{default:r(()=>[t(u,{label:"제품명",modelValue:l.value.prdName,"onUpdate:modelValue":e[1]||(e[1]=d=>l.value.prdName=d),dense:"",outlined:""},null,8,["modelValue"])]),_:1}),t(n,{cols:"3"},{default:r(()=>[t(u,{label:"제품유형",modelValue:l.value.prdType,"onUpdate:modelValue":e[2]||(e[2]=d=>l.value.prdType=d),dense:"",outlined:""},null,8,["modelValue"])]),_:1}),t(n,{cols:"3"},{default:r(()=>[t(u,{label:"검사완료일자",modelValue:l.value.chkedDate,"onUpdate:modelValue":e[3]||(e[3]=d=>l.value.chkedDate=d),type:"date",dense:"",outlined:""},null,8,["modelValue"])]),_:1}),t(p,{justify:"end"},{default:r(()=>[t(Q,{color:"error",class:"top_btn_ser",variant:"elevated",onClick:w},{default:r(()=>e[4]||(e[4]=[M("초기화")])),_:1})]),_:1})]),_:1}),e[5]||(e[5]=O("br",null,null,-1)),t(y(j),{rowData:V.value,columnDefs:c.value,theme:y(b),gridOptions:_.value,onRowClicked:g,style:{height:"400px"}},null,8,["rowData","columnDefs","theme","gridOptions"])]),_:1})],64))}};export{W as default};
