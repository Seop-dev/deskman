import{_ as I,a as T}from"./UiParentCard.vue_vue_type_script_setup_true_lang-DnD-5gIF.js";import{B as U}from"./main-Dfa23GB-.js";import{O as o,_ as F,$ as V,P as O,q as $,o as z,a as l,d,w as s,V as g,b as f,a0 as C,a3 as P,a4 as x,f as M,e as b,A as D,a1 as Y,F as q}from"./index-CGGVM91c.js";import{_ as Q}from"./NewModal-RG6-e5WE.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Z={class:"radioDiv"},j={__name:"FailMaterialSelect",setup(G){const A=Y,i=o(null),m=o(""),c=o([]),v=o([]),_=[{field:"자재코드",headerName:"자재코드",flex:1},{field:"자재명",headerName:"자재명",flex:1},{field:"자재유형",headerName:"자재유형",flex:1},{field:"규격",headerName:"규격",flex:1},{field:"단위",headerName:"단위",flex:1}],h=o([]),N=async a=>{m.value=a,v.value=_;try{const e=await V.get("http://localhost:3000/materials");c.value=e.data.map(t=>({자재코드:t.MAT_CODE,자재명:t.MAT_NAME,자재유형:t.MAT_TYPE,규격:t.MAT_SIZE,단위:t.MAT_UNIT})),i.value&&i.value.open()}catch(e){console.error("자재 목록을 가져오는 중 오류가 발생했습니다:"+e),alert("자재 목록을 불러오는 데 실패했습니다.")}};function E(a){a&&(r.value=a.자재명,n.value=a.자재코드)}const w=o([{field:"입고번호",flex:1.5},{field:"자재명",flex:1},{field:"자재코드",flex:1},{field:"규격",flex:1},{field:"단위",flex:1},{field:"불량품수량",flex:1},{field:"상태",flex:1,cellStyle:a=>a.value=="등록"?{color:"black",fontWeight:"bold"}:a.value=="완료"?{color:"red",fontWeight:"bold"}:null}]),p=o([]);F(async()=>{try{const a=await V.get("http://localhost:3000/failMaterials");p.value=a.data.map(e=>({입고번호:e.RECEIPT_NO,자재명:e.MAT_NAME,자재코드:e.MAT_CODE,자재유형:e.MAT_TYPE,규격:e.MAT_SIZE,단위:e.MAT_UNIT,작성자:e.CREATED_BY,불량품수량:e.TOTAL_QTY,상태:e.MAT_STATUS}))}catch(a){console.error("발주 조회 실패:",a)}});const y=o({title:"불량품"}),R=O([{title:"자재",disabled:!0,href:"#"},{title:"불량품 조회",disabled:!1,href:"#"}]),r=o(""),n=o(""),k=o(""),u=o("");function S(){r.value="",n.value="",k.value="",u.value=""}function B(){}return(a,e)=>(z(),$(q,null,[l(I,{title:y.value.title,breadcrumbs:R.value},null,8,["title","breadcrumbs"]),l(T,{title:"불량품 검색조건"},{default:s(()=>[l(g,{class:"mb-4"},{default:s(()=>[l(f,{cols:"4"},{default:s(()=>[l(C,{label:"자재명",modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=t=>r.value=t),placeholder:"자재명",dense:"",outlined:"",readonly:""},{"append-inner":s(()=>[d("i",{class:"fa-solid fa-magnifying-glass",style:{cursor:"pointer","font-size":"large","margin-right":"0.5rem"},onClick:e[0]||(e[0]=t=>N("불량품 조회",h.value,_))})]),_:1},8,["modelValue"])]),_:1}),l(f,{cols:"4"},{default:s(()=>[l(C,{label:"자재코드",modelValue:n.value,"onUpdate:modelValue":e[2]||(e[2]=t=>n.value=t),placeholder:"자재코드",dense:"",outlined:"",readonly:""},null,8,["modelValue"])]),_:1}),l(f,null,{default:s(()=>[d("div",Z,[e[4]||(e[4]=d("span",{class:"mr-2"},"상태:",-1)),l(P,{modelValue:u.value,"onUpdate:modelValue":e[3]||(e[3]=t=>u.value=t),inline:"","hide-details":""},{default:s(()=>[l(x,{label:"등록",value:"등록"}),l(x,{label:"완료",value:"완료"})]),_:1},8,["modelValue"])])]),_:1})]),_:1}),l(g,{justify:"center"},{default:s(()=>[l(M,{color:"error",class:"mr-2",onClick:S},{default:s(()=>e[5]||(e[5]=[b("초기화")])),_:1}),l(M,{color:"darkText",onClick:B},{default:s(()=>e[6]||(e[6]=[b("검색")])),_:1})]),_:1})]),_:1}),e[7]||(e[7]=d("div",{class:"div"},null,-1)),l(T,{title:"불량품 목록"},{default:s(()=>[l(D(U),{rowData:p.value,columnDefs:w.value,theme:D(A),style:{height:"24rem",width:"100%"},pagination:!0,"pagination-page-size":8,onCellValueChanged:a.onCellValueChanged},null,8,["rowData","columnDefs","theme","onCellValueChanged"]),l(Q,{ref_key:"modalRef",ref:i,title:m.value,rowData:c.value,colDefs:v.value,onConfirm:E},null,8,["title","rowData","colDefs"])]),_:1})],64))}},ee=W(j,[["__scopeId","data-v-25ebfad6"]]);export{ee as default};
