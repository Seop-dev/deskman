import{_ as $,a as h}from"./UiParentCard.vue_vue_type_script_setup_true_lang-DnD-5gIF.js";import{B as z}from"./main-Dfa23GB-.js";import{O as d,_ as Q,$ as T,P as F,q as G,o as L,a as o,d as i,w as t,V as O,b as u,a0 as r,a3 as Z,a4 as E,f as P,e as R,A as y,a1 as q,F as j}from"./index-CGGVM91c.js";import{_ as H}from"./NewModal-RG6-e5WE.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";const K={class:"radioDiv"},X={__name:"MaterialOrderSelect",setup(ee){const S=q,D=d(null),v=d(""),g=d([]),A=d([]),b=[{field:"발행번호",headerName:"발행번호",flex:1.5},{field:"업체",headerName:"공급업체",flex:1},{field:"자재코드",headerName:"자재코드",flex:1},{field:"자재명",headerName:"자재명",flex:.8},{field:"발주일자",headerName:"발주일자",flex:1},{field:"수량",headerName:"수량",flex:.8},{field:"상태",flex:.8,cellStyle:a=>a.value==="대기"?{color:"black",fontWeight:"bold"}:a.value==="진행중"?{color:"blue",fontWeight:"bold"}:a.value=="완료"?{color:"red",fontWeight:"bold"}:null}],x=[{field:"자재코드",headerName:"자재코드",flex:1},{field:"자재명",headerName:"자재명",flex:1},{field:"자재유형",headerName:"자재유형",flex:1},{field:"규격",headerName:"규격",flex:1},{field:"단위",headerName:"단위",flex:1}],U=d([]),N=async a=>{if(v.value=a,a=="자재 조회"){A.value=x;const e=await T.get("http://localhost:3000/materials");g.value=e.data.map(l=>({자재코드:l.MAT_CODE,자재명:l.MAT_NAME,자재유형:l.MAT_TYPE,규격:l.MAT_SIZE,단위:l.MAT_UNIT}))}else if(a=="자재발주서 조회"){A.value=b;const e=await T.get("http://localhost:3000/materials/order/select");console.log(e.data),g.value=e.data.map(l=>({발행번호:l.PO_NO,업체:l.SUPPLYER,자재코드:l.MAT_CODE,자재명:l.MAT_NAME,발주일자:l.ORDER_DATE.slice(0,10),수량:l.RECEIPT_QTY,상태:l.PO_STATUS}))}D.value&&D.value.open()},w=d([{field:"발행번호",flex:1.5},{field:"공급업체",flex:1},{field:"자재코드",flex:1},{field:"자재명",flex:1},{field:"자재유형",flex:1},{field:"규격",flex:1.1},{field:"단위",flex:.6},{field:"발주일자",flex:1},{field:"납기일자",flex:1},{field:"담당자",flex:1},{field:"발주수량",flex:1},{field:"상태",flex:1,cellStyle:a=>a.value==="대기"?{color:"black",fontWeight:"bold"}:a.value==="진행중"?{color:"blue",fontWeight:"bold"}:a.value=="완료"?{color:"red",fontWeight:"bold"}:null}]),V=d([]);Q(async()=>{try{const a=await T.get("http://localhost:3000/materials/order/select");console.log(a.data),V.value=a.data.map(e=>({발행번호:e.PO_NO,공급업체:e.SUPPLYER,자재코드:e.MAT_CODE,자재명:e.MAT_NAME,자재유형:e.MAT_TYPE,규격:e.MAT_SIZE,단위:e.MAT_UNIT,발주일자:e.ORDER_DATE.slice(0,10),납기일자:e.PO_DDAY.slice(0,10),담당자:e.MANAGER,발주수량:e.RECEIPT_QTY,상태:e.PO_STATUS}))}catch(a){console.error("발주 조회 실패:",a)}});const Y=d({title:"자재발주서"}),k=F([{title:"자재",disabled:!0,href:"#"},{title:"자재발주서 조회",disabled:!1,href:"#"}]),n=d(""),s=d(""),f=d(""),c=d(""),m=d(""),p=d(""),_=d("");function I(){n.value="",s.value="",f.value="",c.value="",m.value="",p.value="",_.value=""}const B=async()=>{try{const a={poNo:n.value||null,matName:s.value||null,matCode:f.value||null,manager:c.value||null,orderDate:m.value||null,dueDate:p.value||null,status:_.value||null},e=await T.post("http://localhost:3000/orderSearch",a);V.value=e.data.map(l=>{var M,C;return{발행번호:l.PO_NO,공급업체:l.SUPPLYER,자재코드:l.MAT_CODE,자재명:l.MAT_NAME,자재유형:l.MAT_TYPE,규격:l.MAT_SIZE,단위:l.MAT_UNIT,발주일자:((M=l.ORDER_DATE)==null?void 0:M.slice(0,10))||"",납기일자:((C=l.PO_DDAY)==null?void 0:C.slice(0,10))||"",담당자:l.MANAGER,발주수량:l.RECEIPT_QTY,상태:l.PO_STATUS}})}catch(a){console.error("발주서 검색 실패:",a),alert("검색 중 오류가 발생했습니다.")}};function W(a){a&&(v.value==="자재발주서 조회"?n.value=a.발행번호||"":v.value==="자재 조회"&&(s.value=a.자재명||"",f.value=a.자재코드||""))}return(a,e)=>(L(),G(j,null,[o($,{title:Y.value.title,breadcrumbs:k.value},null,8,["title","breadcrumbs"]),o(h,{title:"자재발주서 검색조건"},{default:t(()=>[o(O,{class:"mb-4"},{default:t(()=>[o(u,{cols:"3"},{default:t(()=>[o(r,{label:"발행번호",modelValue:n.value,"onUpdate:modelValue":e[1]||(e[1]=l=>n.value=l),placeholder:"발행번호",dense:"",outlined:"",readonly:""},{"append-inner":t(()=>[i("i",{class:"fa-solid fa-magnifying-glass",style:{cursor:"pointer","font-size":"large","margin-right":"0.5rem"},onClick:e[0]||(e[0]=l=>N("자재발주서 조회",a.materialRowData,b))})]),_:1},8,["modelValue"])]),_:1}),o(u,{cols:"3"},{default:t(()=>[o(r,{label:"자재명",modelValue:s.value,"onUpdate:modelValue":e[3]||(e[3]=l=>s.value=l),placeholder:"자재명",dense:"",outlined:"",readonly:""},{"append-inner":t(()=>[i("i",{class:"fa-solid fa-magnifying-glass",style:{cursor:"pointer","font-size":"large","margin-right":"0.5rem"},onClick:e[2]||(e[2]=l=>N("자재 조회",U.value,x))})]),_:1},8,["modelValue"])]),_:1}),o(u,{cols:"3"},{default:t(()=>[o(r,{label:"자재코드",modelValue:f.value,"onUpdate:modelValue":e[4]||(e[4]=l=>f.value=l),placeholder:"자재코드",dense:"",outlined:"",readonly:""},null,8,["modelValue"])]),_:1}),o(u,{cols:"3"},{default:t(()=>[o(r,{label:"담당자",modelValue:c.value,"onUpdate:modelValue":e[5]||(e[5]=l=>c.value=l),placeholder:"담당자",dense:"",outlined:""},null,8,["modelValue"])]),_:1}),o(u,{cols:"3"},{default:t(()=>[o(r,{label:"발주일자",modelValue:m.value,"onUpdate:modelValue":e[6]||(e[6]=l=>m.value=l),type:"date",dense:"",outlined:""},null,8,["modelValue"])]),_:1}),o(u,{cols:"3"},{default:t(()=>[o(r,{label:"납기일자",modelValue:p.value,"onUpdate:modelValue":e[7]||(e[7]=l=>p.value=l),type:"date",dense:"",outlined:""},null,8,["modelValue"])]),_:1}),o(u,{cols:"6"},{default:t(()=>[i("div",K,[e[9]||(e[9]=i("span",{class:"mr-2"},"상태:",-1)),o(Z,{modelValue:_.value,"onUpdate:modelValue":e[8]||(e[8]=l=>_.value=l),inline:"","hide-details":""},{default:t(()=>[o(E,{label:"대기",value:"대기"}),o(E,{label:"진행중",value:"진행중"}),o(E,{label:"완료",value:"완료"})]),_:1},8,["modelValue"])])]),_:1})]),_:1}),o(O,{justify:"center"},{default:t(()=>[o(P,{color:"error",class:"mr-2",onClick:I},{default:t(()=>e[10]||(e[10]=[R("초기화")])),_:1}),o(P,{color:"darkText",onClick:B},{default:t(()=>e[11]||(e[11]=[R("검색")])),_:1})]),_:1})]),_:1}),e[12]||(e[12]=i("div",{class:"div"},null,-1)),o(h,{title:"자재발주서 목록"},{default:t(()=>[o(y(z),{rowData:V.value,columnDefs:w.value,theme:y(S),style:{height:"19rem",width:"100%"},pagination:!0,"pagination-page-size":5,onCellValueChanged:a.onCellValueChanged},null,8,["rowData","columnDefs","theme","onCellValueChanged"]),o(H,{ref_key:"modalRef",ref:D,title:v.value,rowData:g.value,colDefs:A.value,onConfirm:W},null,8,["title","rowData","colDefs"])]),_:1})],64))}},ue=J(X,[["__scopeId","data-v-1068cac1"]]);export{ue as default};
